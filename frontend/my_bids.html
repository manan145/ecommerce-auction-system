<!-- my_bids.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Bids</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="container py-4">
  <h2 class="mb-4">My Bids</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Item</th>
        <th>Amount</th>
        <th>Time</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="myBidTable"></tbody>
  </table>

  <script>
    const BASE_URL = 'http://127.0.0.1:5000';
    const token = localStorage.getItem('token');

    async function fetchMyBids() {
      const response = await fetch(`${BASE_URL}/buyer/my-bids`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      const bids = await response.json();
      const table = document.getElementById("myBidTable");
      table.innerHTML = bids.map(b => `
        <tr>
          <td>${b.item_title}</td>
          <td>$${parseFloat(b.amount).toFixed(2)}</td>
          <td>${new Date(b.bid_time).toLocaleString()}</td>
          <td>${b.status}</td>
        </tr>
      `).join('');
    }

    fetchMyBids();
  </script>
</body>
</html>
